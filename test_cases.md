# Тест-кейсы для скрипта lab4.sh

## Оглавление
- [Общие тест-кейсы для скрипта](#общие-тест-кейсы-для-скрипта)
- [Флаг 1: --best-grades](#флаг-1---best-grades---вывод-студентов-с-максимальным-количеством-оценок)
- [Флаг 2: --performance](#флаг-2---performance---вывод-списка-группы-упорядоченного-по-успеваемости)
- [Флаг 3: --dossier-student](#флаг-3---dossier-student---вывод-досье-студента-по-фамилии)
- [Флаг 4: --dossier-group](#флаг-4---dossier-group---вывод-досье-всех-студентов-группы)
- [Флаг 5: --dossier-all](#флаг-5---dossier-all---вывод-всех-досье-студентов)

---

## Общие тест-кейсы для скрипта

| № | Тип теста | Входные данные | Ожидаемый результат |
|---|-----------|----------------|---------------------|
| 1 | Аномальная ситуация | Отсутствие аргументов: `./lab4.sh` | Ошибка: Не указаны аргументы. Используйте --help для справки |
| 2 | Аномальная ситуация | Несуществующий флаг: `./lab4.sh --unknown` | Ошибка: Неизвестный флаг '--unknown'. Используйте --help для справки |
| 3 | Аномальная ситуация | Несуществующая директория: переименовать `labfiles-25` и запустить скрипт | Ошибка: Директория 'labfiles-25' не найдена |
| 4 | Нормальная ситуация | `./lab4.sh -h` | Вывод справки по всем доступным флагам |
| 5 | Нормальная ситуация | `./lab4.sh --help` | Вывод справки по всем доступным флагам |

---

## Флаг 1: --best-grades - Вывод студентов с максимальным количеством оценок

### Формат вызова
```bash
./lab4.sh --best-grades <номер_группы>
```

### Таблица тест-кейсов

| № | Тип теста | Входные данные | Ожидаемый результат                                                                                                                                                                    |
|---|-----------|----------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1.1 | Аномальная ситуация | `./lab4.sh --best-grades` (отсутствие аргумента группы) | Ошибка: Неверное количество аргументов. Использование: ./lab4.sh --best-grades <группа>                                                                                                |
| 1.2 | Аномальная ситуация | `./lab4.sh --best-grades A-06-04 extra_arg` (слишком много аргументов) | Ошибка: Неверное количество аргументов. Использование: ./lab4.sh --best-grades <группа>                                                                                                |
| 1.3 | Аномальная ситуация | `./lab4.sh --best-grades A-06-0` (неправильный формат) | Ошибка: Номер группы не соответствует формату (A-XX-XX или Ae-XX-XX)                                                                                                                   |
| 1.4 | Аномальная ситуация | `./lab4.sh --best-grades A-99-99` (группа не существует) | Ошибка: Группа 'A-99-99' не существует. Доступные группы: <список групп>                                                                                                               |
| 1.5 | Аномальная ситуация | Нет прав на чтение файла группы | Ошибка: Нет прав на чтение файла группы 'A-06-04'                                                                                                                                      |
| 1.6 | Особая ситуация | Все студенты имеют одинаковое количество оценок | Вывод первого найденного студента с этим количеством оценок                                                                                                                            |
| 1.7 | Нормальная ситуация | `./lab4.sh --best-grades A-06-04` | **Вывод трёх таблиц:**<br>1. Максимальное количество оценок 3: PanovD (6)<br>2. Максимальное количество оценок 4: ZdorovovP (6)<br>3. Максимальное количество оценок 5: KozlovskyE (6) |
| 1.8 | Нормальная ситуация | `./lab4.sh --best-grades Ae-21-22` | Вывод трёх таблиц со студентами группы Ae-21-22 с максимальным количеством троек, четвёрок и пятёрок                                                                                   |

**Пример нормального выполнения:**
```
Ввод: ./lab4.sh --best-grades A-06-04
Вывод:
==========================================
Анализ оценок для группы 'A-06-04'
==========================================

Максимальное количество оценок 3
Студент                   | Группа          | Кол-во 3     | Кол-во 4     | Кол-во 5
--------------------------------------------------------------------------------------------
PanovD                    | A-06-04         | 6            | 2            | 0

Максимальное количество оценок 4
Студент                   | Группа          | Кол-во 3     | Кол-во 4     | Кол-во 5
--------------------------------------------------------------------------------------------
ZdorovovP                 | A-06-04         | 2            | 6            | 0

Максимальное количество оценок 5
Студент                   | Группа          | Кол-во 3     | Кол-во 4     | Кол-во 5
--------------------------------------------------------------------------------------------
KozlovskyE                | A-06-04         | 0            | 2            | 6
```

---

## Флаг 2: --performance - Вывод списка группы, упорядоченного по успеваемости

### Формат вызова
```bash
./lab4.sh --performance <номер_группы>
```

### Таблица тест-кейсов

| № | Тип теста | Входные данные | Ожидаемый результат |
|---|-----------|----------------|---------------------|
| 2.1 | Аномальная ситуация | `./lab4.sh --performance` (отсутствие аргумента группы) | Ошибка: Неверное количество аргументов. Использование: ./lab4.sh --performance <группа> |
| 2.2 | Аномальная ситуация | `./lab4.sh --performance A-06-04 extra_arg` (слишком много аргументов) | Ошибка: Неверное количество аргументов. Использование: ./lab4.sh --performance <группа> |
| 2.3 | Аномальная ситуация | `./lab4.sh --performance A-06-0` (неправильный формат) | Ошибка: Номер группы не соответствует формату (A-XX-XX или Ae-XX-XX) |
| 2.4 | Аномальная ситуация | `./lab4.sh --performance A-99-99` (группа не существует) | Ошибка: Группа 'A-99-99' не существует. Доступные группы: <список групп> |
| 2.5 | Аномальная ситуация | Нет прав на чтение файла группы | Ошибка: Нет прав на чтение файла группы 'A-06-04' |
| 2.6 | Особая ситуация | Все студенты имеют одинаковую успеваемость | Вывод всех студентов, отсортированных по фамилии |
| 2.7 | Нормальная ситуация | `./lab4.sh --performance A-06-04` | **Вывод таблицы:**<br>Список группы, отсортированный по общему среднему баллу (по убыванию).<br>Первый: BoriskinaI (4.00)<br>Последний: ScvorcovaS (2.50) |
| 2.8 | Нормальная ситуация | `./lab4.sh --performance Ae-21-22` | Вывод таблицы с успеваемостью для группы Ae-21-22 |

**Пример нормального выполнения:**
```
Ввод: ./lab4.sh --performance A-06-04
Вывод:
==========================================
Сводная таблица с успеваемостью для группы 'A-06-04'
==========================================

Студент                    | Поп-Культуроведение        | Цирковое дело       | Общее усреднённое
--------------------------------------------------------------------------------------------------
BoriskinaI                 | 4.00                       | 4.00                | 4.00
BaryshevaT                 | 3.80                       | 4.00                | 3.90
KozlovskyE                 | 3.83                       | 3.38                | 3.57
SivoronovS                 | 3.83                       | 3.00                | 3.38
VoronovA                   | 3.11                       | 3.50                | 3.27
...
```

---

## Флаг 3: --dossier-student - Вывод досье студента по фамилии

### Формат вызова
```bash
./lab4.sh --dossier-student <ФИО_студента>
```

### Таблица тест-кейсов

| № | Тип теста | Входные данные | Ожидаемый результат |
|---|-----------|----------------|---------------------|
| 3.1 | Аномальная ситуация | `./lab4.sh --dossier-student` (отсутствие аргумента ФИО) | Ошибка: Неверное количество аргументов. Использование: ./lab4.sh --dossier-student <фамилия> |
| 3.2 | Аномальная ситуация | `./lab4.sh --dossier-student PashkovskyA extra_arg` (слишком много аргументов) | Ошибка: Неверное количество аргументов. Использование: ./lab4.sh --dossier-student <фамилия> |
| 3.3 | Аномальная ситуация | `./lab4.sh --dossier-student IvanovAA` (досье студента не существует) | Ошибка: У студента 'IvanovAA' нет досье |
| 3.4 | Аномальная ситуация | Нет прав на чтение файла досье `*Names.log` | Ошибка: Нет прав на чтение файла досье |
| 3.5 | Аномальная ситуация | `./lab4.sh --dossier-student ZNames` (неверная первая буква) | Ошибка: Файл досье 'ZNames.log' не найден |
| 3.6 | Нормальная ситуация | `./lab4.sh --dossier-student PashkovskyA` | **Вывод:**<br>Досье студента PashkovskyA:<br>Клонит в сон от его храпа. Сосочек. Ничего не записывает. Делает сэлфи на каждой лекции... |

**Пример нормального выполнения:**
```
Ввод: ./lab4.sh --dossier-student PashkovskyA
Вывод:
==========================================
Досье студента: PashkovskyA
==========================================

Клонит в сон от его храпа. Сосочек. Ничего не записывает. Делает сэлфи на каждой лекции. Подлизывается, это можно использовать! Клонит в сон от его храпа. Спит на лекциях!
```

---

## Флаг 4: --dossier-group - Вывод досье всех студентов группы

### Формат вызова
```bash
./lab4.sh --dossier-group <номер_группы>
```

### Таблица тест-кейсов

| № | Тип теста | Входные данные | Ожидаемый результат |
|---|-----------|----------------|---------------------|
| 4.1 | Аномальная ситуация | `./lab4.sh --dossier-group` (отсутствие аргумента группы) | Ошибка: Неверное количество аргументов. Использование: ./lab4.sh --dossier-group <группа> |
| 4.2 | Аномальная ситуация | `./lab4.sh --dossier-group A-06-04 extra_arg` (слишком много аргументов) | Ошибка: Неверное количество аргументов. Использование: ./lab4.sh --dossier-group <группа> |
| 4.3 | Аномальная ситуация | `./lab4.sh --dossier-group A-06-0` (неправильный формат) | Ошибка: Номер группы не соответствует формату (A-XX-XX или Ae-XX-XX) |
| 4.4 | Аномальная ситуация | `./lab4.sh --dossier-group A-99-99` (группа не существует) | Ошибка: Группа 'A-99-99' не существует. Доступные группы: <список групп> |
| 4.5 | Особая ситуация | Студент в группе без досье | Вывод "Нет досье" для этого студента |
| 4.6 | Нормальная ситуация | `./lab4.sh --dossier-group A-06-04` | **Вывод:**<br>Таблица с полным досье всех студентов группы A-06-04 |

**Пример нормального выполнения:**
```
Ввод: ./lab4.sh --dossier-group A-06-04
Вывод:
==========================================
Досье студентов группы 'A-06-04'
==========================================

Студент                        | Группа          | Досье
--------------------------------------------------------------------------------------------
PashkovskyA                    | A-06-04         | Клонит в сон от его храпа. Сосочек. Ничего не записывает. Делает сэлфи на каждой лекции. Подлизывается, это можно использовать! Клонит в сон от его храпа. Спит на лекциях!
SmugalovI                      | A-06-04         | Подлизывается, это можно использовать! Ничего не записывает. Белый снаружи, черный внутри) Постоянно выходит разговаривать с тещей!
LoginovA                       | A-06-04         | Подлизывается, это можно использовать! Боится меня( Мой бакалавр... мда... 17 сентября опоздание на 5 минут; Мой бакалавр... мда... В среду опоздание на 4 минуты; Левша.
...
```

---

## Флаг 5: --dossier-all - Вывод всех досье студентов

### Формат вызова
```bash
./lab4.sh --dossier-all
```

### Таблица тест-кейсов

| № | Тип теста | Входные данные | Ожидаемый результат |
|---|-----------|----------------|---------------------|
| 5.1 | Аномальная ситуация | `./lab4.sh --dossier-all extra_arg` (лишние аргументы) | Ошибка: Флаг --dossier-all не принимает аргументов |
| 5.2 | Нормальная ситуация | `./lab4.sh --dossier-all` | **Вывод:**<br>Таблица с полным досье всех студентов из всех файлов.<br>Если группа не найдена: "Не найдена" |
| 5.3 | Особая ситуация | Студент без группы | Вывод "Не найдена" в колонке "Группа" |

**Пример нормального выполнения:**
```
Ввод: ./lab4.sh --dossier-all | head -20
Вывод:
==========================================
Все досье студентов
==========================================

Студент                        | Группа          | Досье
--------------------------------------------------------------------------------------------
AndreyevMW                     | A-06-06         | Выше 3 не поставлю! Делает сэлфи на каждой лекции. Клонит в сон от его храпа. В среду опоздание на 4 минуты;
AnasenkoBI                     | A-06-09         | Делает сэлфи на каждой лекции. Делает вид, что все понимает. Болеет за Спартак... Смешная фамилия) Боится меня( Левша. Все время сидит в телефоне.
AnasenkoII                     | A-06-06         | Делает вид, что все понимает.
...
```

---

## Примечания

1. **Формат номера группы:** `A-XX-XX` или `Ae-XX-XX`, где X - цифры (например: A-06-04, Ae-21-22)
2. **Формат файлов тестов:** `Группа;Студент;Дата;Баллы;Оценка` (CSV)
3. **Формат файлов досье:** Текстовые файлы в `students/general/notes/*Names.log` с разделителями `=====`
4. **Обработка ошибок:** Все аномальные ситуации обрабатываются корректно с информативными сообщениями
5. **Временные файлы:** Автоматически удаляются после завершения работы скрипта
6. **Совместимость:** Скрипт совместим с bash 3.2+ (работает на macOS и Linux)

---

## Результаты тестирования

| Флаг | Всего тестов | Пройдено | Не пройдено |
|------|--------------|----------|-------------|
| Общие тесты | 5 | ✅ 5 | ❌ 0 |
| --best-grades | 8 | ✅ 8 | ❌ 0 |
| --performance | 8 | ✅ 8 | ❌ 0 |
| --dossier-student | 6 | ✅ 6 | ❌ 0 |
| --dossier-group | 6 | ✅ 6 | ❌ 0 |
| --dossier-all | 3 | ✅ 3 | ❌ 0 |
| **ИТОГО** | **36** | **✅ 36** | **❌ 0** |

**Процент успешных тестов: 100%**

Все тест-кейсы успешно пройдены. Скрипт стабильно работает с:
- ✅ Корректными входными данными
- ✅ Некорректными входными данными (валидация)
- ✅ Несуществующими группами и студентами
- ✅ Специальными случаями (пустые значения, одинаковые результаты)
- ✅ Ошибками прав доступа к файлам
- ✅ Различными форматами номеров групп (A-XX-XX и Ae-XX-XX)

---

**Дата тестирования:** 2025-11-19

**Тестировщик:** Романов Д. А.

**Версия скрипта:** 1.0

**Окружение:** macOS с bash 3.2.57
